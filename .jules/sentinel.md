## 2026-05-22 - [Buffer Overflow in Audio Rendering]
**Vulnerability:** A heap buffer overflow was found in `untracker.cpp` where `mod->read_interleaved_stereo` was called even if the user specified `--channels 1`. This caused 2 channels of audio to be written into a buffer allocated for only 1 channel.
**Learning:** Hardcoded stereo rendering functions should not be used when the output channel count is user-configurable. The libopenmpt C++ API does not provide a generic `read_interleaved` function; instead, it provides specific overloads like `read` (mono), `read_interleaved_stereo`, and `read_interleaved_quad`.
**Prevention:** Always use channel-aware rendering functions and validate that the output buffer size matches the requested channel count multiplied by the frame count. Dispatch to the specific libopenmpt read functions based on the validated channel count.
